<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HopeLink Bracelets | Wear Hope</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              green: '#047857',
              dark: '#064e3b',
              beige: '#f5f5f4',
              gold: '#d97706'
            }
          },
          fontFamily: {
            serif: ['"Playfair Display"', 'serif'],
            sans: ['Inter', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <style>
    html { scroll-behavior: smooth; }
    .fade-in { animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</head>

<body class="bg-brand-beige text-gray-800 font-sans antialiased">

  <!-- HERO with local background image: rumah_hope.png -->
  <header class="relative bg-brand-dark text-white overflow-hidden">
    <div
      class="absolute inset-0 opacity-35 bg-cover bg-center"
      style="background-image: url('rumah_hope.png');"
      aria-hidden="true"
    ></div>

    <div class="relative max-w-7xl mx-auto px-4 py-24 sm:px-6 lg:px-8 flex flex-col items-center text-center">
      <h1 class="text-5xl md:text-7xl font-serif mb-4 tracking-wide">HopeLink Bracelets</h1>
      <p class="text-xl md:text-2xl font-light mb-8 max-w-2xl text-gray-200">
        One bracelet = one month of care for a child at <span class="font-semibold text-brand-gold">Rumah Hope</span>.
      </p>
      <div class="flex flex-col sm:flex-row gap-4">
        <a href="#order" class="bg-brand-gold text-white px-8 py-3 rounded-full font-bold hover:bg-yellow-600 transition duration-300 shadow-lg">
          Buy Hope (RM 10)
        </a>
        <button onclick="openMeasureModal()" class="border-2 border-white text-white px-8 py-3 rounded-full font-semibold hover:bg-white/10 transition">
          Find My Size
        </button>
      </div>
    </div>
  </header>

  <section class="py-16 px-4 max-w-5xl mx-auto">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-serif text-brand-dark mb-4">Handmade with Heart</h2>
      <p class="text-lg text-gray-600 leading-relaxed max-w-2xl mx-auto">
        These bracelets are crafted by the children of Rumah Hope. Each bead represents a moment of creativity and joy.
        100% of profits go directly toward their shelter, education, and daily needs.
      </p>
    </div>

    <div id="order" class="bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row max-w-5xl mx-auto">

      <!-- Product image replaced: sample.png (local file) -->
      <div class="md:w-1/2 h-64 md:h-auto bg-gray-100 relative group">
        <img id="productImg" src="sample.png" alt="HopeLink bracelet sample" class="w-full h-full object-cover">
        <div class="absolute top-4 left-4 bg-white/90 backdrop-blur text-brand-dark px-4 py-2 rounded-lg font-bold shadow-sm">
          RM 10.00
        </div>
      </div>

      <div class="md:w-1/2 p-8 relative bg-white">

        <!-- SUCCESS OVERLAY -->
        <div id="successMessage" class="hidden absolute inset-0 bg-white z-20 flex flex-col items-center justify-center text-center p-8 fade-in overflow-y-auto">
          <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-4xl mb-4 shadow-sm">✓</div>
          <h3 class="text-2xl font-serif text-brand-dark mb-2">Order Submitted!</h3>
          <p class="text-gray-600 mb-6">Step 1: Please complete payment, then send your receipt.</p>

          <!-- PAYMENT CARD -->
          <div class="w-full max-w-sm bg-gray-50 border border-gray-200 rounded-2xl p-4 mb-5 text-left">
            <p class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Payment (RM 10)</p>

            <img src="payment-qr.jpg" alt="Payment QR" class="w-full rounded-xl border border-gray-200 bg-white" />

            <div class="mt-3 text-xs text-gray-700 space-y-1">
              <p class="font-semibold">TNG / Transfer to:</p>
              <p><span class="font-semibold">Name:</span> TEY HENRY</p>
              <p><span class="font-semibold">Number:</span> +601115159208</p>
              <p class="text-gray-500 mt-2">After paying, tap “Send Receipt Now”.</p>
            </div>
          </div>

          <!-- SEND RECEIPT -->
          <a id="sendReceiptBtn"
             href="https://wa.me/601115159208?text=Hi%20HopeLink,%20I%20just%20paid%20RM10%20for%20my%20order.%20Here%20is%20my%20receipt."
             target="_blank"
             class="w-full max-w-sm bg-green-500 text-white px-6 py-4 rounded-xl font-bold hover:bg-green-600 transition flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654z"/></svg>
            Send Receipt Now
          </a>

          <!-- STEP 2: GROUP -->
          <div id="groupSection" class="hidden w-full max-w-sm mt-5 pt-5 border-t border-gray-200 fade-in">
            <p class="text-gray-700 font-semibold mb-2 text-center">Step 2: Join our WhatsApp Group</p>
            <p class="text-xs text-gray-500 mb-3 text-center">
              We’ll announce self-collect point details and provide customer support there.
            </p>

            <div class="bg-gray-50 border border-gray-200 rounded-2xl p-4 mb-4">
              <img src="wsgroup-qr.jpeg" alt="HopeLink WhatsApp Group QR" class="w-full rounded-xl border border-gray-200 bg-white" />
            </div>

            <a href="https://chat.whatsapp.com/LZhI7FpcCMv746LaSBIweN"
               target="_blank"
               class="w-full bg-brand-dark text-white px-6 py-4 rounded-xl font-bold hover:bg-black transition flex items-center justify-center gap-2 shadow-md">
              Join WhatsApp Group
            </a>

            <button type="button"
                    onclick="makeAnotherOrder()"
                    class="w-full mt-3 bg-white border border-gray-300 text-gray-700 px-6 py-4 rounded-xl font-bold hover:bg-gray-50 transition">
              Make Another Order
            </button>
          </div>
        </div>
        <!-- END SUCCESS OVERLAY -->

        <!-- ORDER FORM -->
        <form id="hopeForm"
              action="https://docs.google.com/forms/d/e/1FAIpQLSdrj6y2Jxom3vBiMer5WcYvDTsTOz6aPKLjdIItyleJn0uejg/formResponse"
              method="POST"
              target="hidden_iframe"
              onsubmit="showSuccess()">

          <h3 class="text-2xl font-serif text-brand-dark mb-1">Make a difference</h3>
          <p class="text-sm text-gray-500 mb-6">Fill in your details to secure your bracelet.</p>

          <div class="space-y-5">

            <div>
              <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">Full Name</label>
              <input id="fullNameInput" type="text" name="entry.914557579" required
                     class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 focus:border-brand-green focus:ring-2 focus:ring-green-100 outline-none transition"
                     placeholder="e.g. Sarah Lee">
            </div>

            <div>
              <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">WhatsApp Number</label>
              <input id="whatsAppInput" type="tel" name="entry.899432113" required
                     class="w-full bg-gray-50 border border-gray-200 rounded-lg px-4 py-3 focus:border-brand-green focus:ring-2 focus:ring-green-100 outline-none transition"
                     placeholder="e.g. 012-3456789">
            </div>

            <div>
              <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1 flex justify-between items-center">
                Wrist Size (cm)
                <button type="button" onclick="openMeasureModal()"
                        class="text-brand-green text-xs hover:underline font-bold flex items-center gap-1">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/></svg>
                  Use Measurement Tool
                </button>
              </label>
              <input type="text" id="formSizeInput" name="entry.1098766211" required
                     class="w-full bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-lg px-4 py-3 focus:border-brand-gold outline-none transition font-medium"
                     placeholder="Click tool above or type size">
            </div>

            <!-- CUSTOMIZATION (updated with correct entry IDs) -->
            <div class="bg-gray-50 border border-gray-200 rounded-2xl p-4">
              <p class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-3">Customization</p>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                  <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">Preferred Color</label>

                  <!-- Correct entry ID from your prefilled link: entry.1341673584 -->
                  <select id="colorSelect"
                          name="entry.1341673584"
                          required
                          class="w-full bg-white border border-gray-200 rounded-lg px-4 py-3 focus:border-brand-green focus:ring-2 focus:ring-green-100 outline-none transition">
                    <option value="" selected disabled>Select a color</option>
                    <option value="Blue">Blue</option>
                    <option value="Pink">Pink</option>
                    <option value="Purple">Purple</option>
                    <option value="Yellow">Yellow</option>
                    <option value="Green">Green</option>
                  </select>

                  <p class="text-[11px] text-gray-500 mt-1">We will match the theme as close as possible.</p>
                </div>

                <div>
                  <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">Alphabet Letter</label>

                  <!-- Correct entry ID from your prefilled link: entry.369880882 -->
                  <input
                    id="alphabetInput"
                    type="text"
                    name="entry.369880882"
                    maxlength="6"
                    pattern="[A-Za-z]{0,6}"
                    title="Enter 0 to 6 letters only (A–Z)"
                    class="w-full bg-white border border-gray-200 rounded-lg px-4 py-3 focus:border-brand-green focus:ring-2 focus:ring-green-100 outline-none transition uppercase"
                    placeholder="e.g. HOPE"
                    />


                  <p class="text-[11px] text-gray-500 mt-1">Up to 6 letters (A–Z). Leave empty if you don’t want letters.</p>
                </div>
              </div>

              <!-- DISCLAIMER -->
              <div class="mt-4 text-xs text-brand-dark bg-green-50 p-3 rounded-lg flex items-start gap-2">
                <svg class="w-4 h-4 shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span><strong>Disclaimer:</strong> The actual arrangement will be according to the creativity of the designer.</span>
              </div>
            </div>

            <div class="text-xs text-brand-dark bg-green-50 p-3 rounded-lg flex items-start gap-2">
              <svg class="w-4 h-4 shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Note: This is a <strong>self-collect</strong> order. We will coordinate collection via WhatsApp group.
            </div>

          </div>

          <button type="submit" class="w-full mt-8 bg-brand-dark text-white py-4 rounded-xl font-bold hover:bg-black transition shadow-lg text-lg">
            Place Order (RM 10)
          </button>
          <p class="text-xs text-center text-gray-400 mt-3">Payment details will be shown after you submit.</p>
        </form>

        <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
      </div>
    </div>
  </section>

  <footer class="bg-brand-dark text-white/60 py-8 text-center text-sm">
    <p>HopeLink Project • Universiti Malaya • GKU1001 Entrepreneurship • Semester 1 2025/2026</p>
  </footer>

  <!-- MEASUREMENT MODAL -->
  <div id="measureModal" class="fixed inset-0 bg-black/90 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm">
    <div class="bg-white rounded-2xl w-full max-w-md p-6 relative shadow-2xl overflow-y-auto max-h-[90vh]">
      <button onclick="closeMeasureModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-800 p-2 text-xl font-bold">✕</button>

      <h3 class="text-xl font-serif font-bold text-brand-dark mb-1">Find Your Fit</h3>
      <p class="text-xs text-gray-500 mb-6">No ruler? No problem. Use a card to calibrate.</p>

      <div id="step1" class="flex flex-col items-center">
        <div class="w-full flex justify-center py-4 bg-gray-50 rounded-xl border border-gray-100 mb-4">
          <div id="cardRef" class="bg-blue-600 rounded-lg shadow-xl flex flex-col items-center justify-center text-white/80 relative transition-all duration-75" style="width: 250px; height: 158px;">
            <div class="absolute top-4 left-4 w-8 h-5 bg-yellow-400 rounded opacity-80"></div>
            <div class="text-xs tracking-widest mt-8 font-mono">**** **** **** 1234</div>
            <div class="absolute bottom-2 text-[10px] opacity-50">Standard Credit/ID Card</div>
          </div>
        </div>

        <p class="text-sm font-semibold text-brand-green mb-2 text-center">
          1. Place your actual card on the screen. <br />
          2. Adjust slider until the blue box matches your card size.
        </p>

        <input type="range" min="150" max="450" value="250"
               class="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-brand-green mb-6"
               id="calibrator" oninput="updateWidth(this.value)">

        <button onclick="goToStep2()" class="w-full bg-brand-dark text-white py-3 rounded-xl font-bold hover:bg-black transition shadow-md">
          It Matches! Show Ruler
        </button>
      </div>

      <div id="step2" class="hidden text-center">
        <p class="text-sm text-gray-600 mb-6 px-4">
          Wrap a string around your wrist, pinch the spot where it overlaps, and lay it on this ruler.
        </p>

        <div class="overflow-x-auto mb-8 border-b-2 border-brand-dark bg-yellow-50 relative h-28 flex items-end select-none" id="rulerContainer"></div>

        <div class="bg-brand-beige p-4 rounded-xl mb-4">
          <p class="text-xs text-gray-500 uppercase tracking-widest mb-1">Your Size</p>
          <div class="text-brand-green font-bold text-3xl"><span id="sizeResult">0</span> cm</div>
        </div>

        <div class="flex gap-2">
          <button onclick="resetMeasure()" class="flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-600 font-semibold hover:bg-gray-50">Back</button>
          <button onclick="saveSize()" class="flex-1 px-4 py-3 bg-brand-green text-white rounded-xl font-bold hover:bg-brand-dark shadow-md">Use This Size</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const CARD_WIDTH_MM = 85.6;
    let pixelsPerMm = 0;

    // OPTION A: swap preview image by selecting different sample files (NO hue-rotate)
    const COLOR_IMAGE_MAP = {
      "Blue": "sample-blue.png",
      "Pink": "sample-pink.png",
      "Purple": "sample-purple.png",
      "Yellow": "sample-yellow.png",
      "Green": "sample-green.png"
    };

    function updateWidth(val) {
      const card = document.getElementById('cardRef');
      card.style.width = val + 'px';
      card.style.height = (val / 1.586) + 'px';
    }

    function openMeasureModal() {
      document.getElementById('measureModal').classList.remove('hidden');
    }

    function closeMeasureModal() {
      document.getElementById('measureModal').classList.add('hidden');
    }

    function resetMeasure() {
      document.getElementById('step2').classList.add('hidden');
      document.getElementById('step1').classList.remove('hidden');
    }

    function goToStep2() {
      const currentWidthPx = document.getElementById('calibrator').value;
      pixelsPerMm = currentWidthPx / CARD_WIDTH_MM;

      const ruler = document.getElementById('rulerContainer');
      ruler.innerHTML = '';

      for (let i = 0; i <= 200; i++) {
        const tick = document.createElement('div');
        const isCm = i % 10 === 0;
        const isHalf = i % 5 === 0;

        tick.style.position = 'absolute';
        tick.style.left = (i * pixelsPerMm) + 'px';
        tick.style.bottom = '0';
        tick.style.width = '1px';
        tick.style.backgroundColor = '#064e3b';

        if (isCm) {
          tick.style.height = '24px';
          tick.style.width = '2px';
          const label = document.createElement('span');
          label.innerText = i / 10;
          label.style.position = 'absolute';
          label.style.left = (i * pixelsPerMm - 4) + 'px';
          label.style.bottom = '28px';
          label.style.fontSize = '12px';
          label.style.fontWeight = 'bold';
          label.style.color = '#064e3b';
          ruler.appendChild(label);
        } else if (isHalf) {
          tick.style.height = '14px';
        } else {
          tick.style.height = '8px';
          tick.style.opacity = '0.5';
        }

        ruler.appendChild(tick);
      }

      document.getElementById('step1').classList.add('hidden');
      document.getElementById('step2').classList.remove('hidden');
    }

    function saveSize() {
      closeMeasureModal();
      const input = document.getElementById('formSizeInput');
      input.focus();
      input.placeholder = "Enter the size (e.g., 15 cm)";
    }

    function showSuccess() {
      // Update WhatsApp pre-filled message with their customization
      try {
        const name = document.getElementById('fullNameInput')?.value?.trim() || 'Customer';
        const wa = document.getElementById('whatsAppInput')?.value?.trim() || '';
        const size = document.getElementById('formSizeInput')?.value?.trim() || '';
        const color = document.getElementById('colorSelect')?.value || '';
        const alpha = document.getElementById('alphabetInput')?.value?.trim() || '';

        const msg =
          `Hi HopeLink, I just paid RM10 for my order.\n` +
          `Name: ${name}\n` +
          (wa ? `WhatsApp: ${wa}\n` : '') +
          (size ? `Wrist: ${size} cm\n` : '') +
          (color ? `Color: ${color}\n` : '') +
          (alpha ? `Alphabet: ${alpha}\n` : '') +
          `Here is my receipt.`;

        const sendBtn = document.getElementById('sendReceiptBtn');
        if (sendBtn) {
          sendBtn.href = `https://wa.me/601115159208?text=${encodeURIComponent(msg)}`;
        }
      } catch (e) {
        // fallback to default WhatsApp link
      }

      // show overlay after form submits
      setTimeout(() => {
        document.getElementById('hopeForm').classList.add('opacity-0');
        document.getElementById('successMessage').classList.remove('hidden');
      }, 800);
    }

    document.addEventListener('DOMContentLoaded', () => {
      // reveal group section after clicking "Send Receipt Now"
      const btn = document.getElementById('sendReceiptBtn');
      if (btn) {
        btn.addEventListener('click', () => {
          const group = document.getElementById('groupSection');
          if (group) group.classList.remove('hidden');
        });
      }

      // OPTION A color preview: swap image file
      const colorSelect = document.getElementById('colorSelect');
      const img = document.getElementById('productImg');

      function setPreviewImageForColor(color) {
        if (!img) return;
        const target = COLOR_IMAGE_MAP[color];
        if (!target) {
          img.src = "sample.png";
          return;
        }

        // Try load the target image; if missing, fallback to sample.png
        img.onerror = () => {
          img.onerror = null;
          img.src = "sample.png";
        };
        img.src = target;
      }

      if (colorSelect && img) {
        colorSelect.addEventListener('change', () => {
          setPreviewImageForColor(colorSelect.value);
        });
      }
    });

    function makeAnotherOrder() {
      const form = document.getElementById('hopeForm');
      if (form) form.reset();

      document.getElementById('successMessage').classList.add('hidden');
      document.getElementById('hopeForm').classList.remove('opacity-0');

      const group = document.getElementById('groupSection');
      if (group) group.classList.add('hidden');

      // reset product image to default
      const img = document.getElementById('productImg');
      if (img) img.src = "sample.png";

      document.getElementById('order')?.scrollIntoView({ behavior: 'smooth' });
    }
  </script>
</body>
</html>
